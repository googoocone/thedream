
# 📋 Scholarship Data Import Guide (데이터 임포트 가이드)

다음 데이터 임포트 작업 시 오류를 최소화하기 위한 체크리스트입니다.

## 1. 엑셀 파일 구조 (Excel Structure)
**가장 중요!** 엑셀 파일의 구조가 변경되면 스크립트가 깨질 수 있습니다.

- **헤더 행(Row 2)**: 한국어 컬럼명 (예: `장학 제목`, `마감 기한`) - *참고용*
- **스키마 행(Row 3)**: **DB 컬럼명 (영어)** (예: `name`, `application_end`) - *필수*
    - 스크립트는 이 **3번째 줄(영어 키)**을 기준으로 데이터를 읽습니다.
    - 2번째 줄(한국어)과 데이터가 밀려 있어도, 3번째 줄만 데이터와 열이 맞으면 정상 작동합니다.

## 2. 데이터 포맷 주의사항 (Data Formatting)

### 📅 날짜 (Date)
- **형식**: `YYYY-MM-DD` (예: `2025-11-25`)
- **주의**: 엑셀의 날짜 포맷(숫자, 예: `45986`)도 스크립트가 자동 변환하지만, 가급적 텍스트나 표준 날짜 서식을 사용하는 것이 안전합니다.
- 빈 값일 경우 `NULL`로 들어갑니다.

### 🔢 숫자 (Number)
- **학점/소득 등**: 숫자만 입력해주세요.
- 비워두거나 `-` 등이 들어가 있으면 자동으로 `NULL` 처리됩니다. (에러 방지됨)

### 🏷️ 배열 데이터 (Arrays)
- **해시태그**, **특화자격** 등 여러 값이 들어가는 컬럼
- **구분자**: 쉼표(`,`)로 구분해서 적어주시면 됩니다. (예: `대학생, 청년, 경기도`)
- 스크립트가 자동으로 SQL의 `ARRAY['대학생', '청년', '경기도']` 형태로 변환합니다.

## 3. 새로운 컬럼 추가 시 (Adding Columns)
엑셀에 새로운 정보(예: `payment_method`)를 추가하고 싶다면?

1. **3번째 줄(스키마 행)**에 영어 컬럼명(예: `payment_method`)을 적어주세요.
2. 엑셀 파일만 업데이트하면, 스크립트가 자동으로:
    - DB에 컬럼이 없으면 `ALTER TABLE` 명령어를 생성해 **자동으로 컬럼을 추가**합니다.
    - 따라서 별도의 DB 작업 없이 바로 임포트 가능합니다.

---

## 🚀 임포트 실행 방법 (How to Run)

1. `scholarship2.xlsx` 파일을 프로젝트 루트(`the-dream/`)에 덮어쓰기 합니다.
2. 아래 명령어 실행:
   ```bash
   npx tsx scripts/generate_sql.ts
   ```
3. 생성된 `data/insert_scholarships.sql` 파일을 실행합니다.
